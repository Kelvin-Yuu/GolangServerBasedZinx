# GolangServerBasedZinx

> **说明**：本项目是基于Aceld大佬开发的Zinx服务器框架而成，按照教程“手把手”一步一步迭代搭建的服务器框架，仅供学习使用，无商业用途。
> ## Zinx源码地址
> ### Github
> Git: https://github.com/aceld/zinx
> ### 码云(Gitee)
> Git: https://gitee.com/Aceld/zinx
> ### 官网
> http://zinx.me
> ### 服务器框架开发搭建教程
> 【zinx-Golang轻量级TCP服务器框架(适合Go语言自学-深入浅出)】 
> https://www.bilibili.com/video/BV1wE411d7th

---
## 目前已经完成初步的框架搭建，命名为Zinx V1.0
### 功能简述

本框架是一个基于Golang的轻量级TCP并发服务器框架，主要功能如下：

1. **消息封装**，采用经典的TLV(Type-Len-Value)封包格式来解决TCP粘包问题。由于本框架是TCP流式传播数，难免出现粘包情况。那么框架需要区分两条信息的边界，所以要为框架提供一个统一分拆包封包方法。包的格式为head|body，head中存放data长度和MsgID，body存放data；

2. **支持多路由模式**，处理由用户绑定的自定义业务。多路由实现方式为，消息的MsgID与一个业务进行捆绑，存放在一个Map中；

3. **读写分离模型**，创建两个Goroutine与客户端进行数据交互，一个负责读业务，一个负责写业务。当服务端建立与客户端的套接字后，那么就会开启两个Goroutine分别处理读数据业务和写数据业务，读写数据之间的消息通过一个Channel传递；

4. **引入消息队列与多任务机制**，尽管golang在调度算法已经做的很极致，但大数量的Goroutine调度依然会带来一些不必要的环境切换成本。我们可以通过自行设定一个worker数量来限定处理业务的Goroutine数量，引入消息队列机制来缓冲worker工作的数据。（在学习搭建这个部分的时候，感觉Aceld大佬是在框架中搭建了一个小型的GMP进行预处理，减少服务器负担，只能说**妙**）；

5. **链接管理**，为框架限定链接数，以保证后端的及时响应，如果超过一定量的客户端个数，会拒绝链接请求。并为连接设置属性，当我们在使用链接处理的时候，希望和链接绑定一些用户的数据，或者参数。那么我们现在可以把当前链接设定一些传递参数的接口或者方法。

### 未来实现
1. √心跳包机制 done
2. 负载平衡算法
3. 消息解码
4. ...
